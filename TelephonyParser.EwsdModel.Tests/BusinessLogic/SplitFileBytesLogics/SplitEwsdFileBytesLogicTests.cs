using Microsoft.VisualStudio.TestTools.UnitTesting;
using TelephonyParser.EwsdModel.BusinessLogic.SplitFileBytesLogics;

namespace TelephonyParser.EwsdModel.Tests.BusinessLogic.SplitFileBytesLogics;

[TestClass()]
public class SplitEwsdFileBytesLogicTests
{
    private readonly byte[] _bytes1 = new byte[] { 0x84, 0x51, 0x00, 0x8c, 0x00, 0x00, 0x11, 0x8e, 0x8e, 0x0a, 0x03, 0x13, 0x0a, 0x98, 0x35, 0x91, 0x36,
        0x28, 0x64, 0x15, 0x0b, 0x01, 0x00, 0x06, 0x3b, 0x0d, 0x32, 0x00, 0x00, 0x67, 0x00, 0x00, 0x00, 0x6b, 0x42, 0x49, 0x4d, 0x54, 0x43,
        0x20, 0x01, 0x00, 0x0e, 0x6c, 0x42, 0x57, 0x53, 0x4d, 0x47, 0x20, 0x00, 0x00, 0x0f, 0x6e, 0x06, 0x36, 0xa0, 0x13, 0x2e, 0x7a, 0x7f,
        0x00, 0x82, 0x05, 0x10, 0x00, 0x0a, 0x8a, 0x04, 0x00, 0x00, 0xa8, 0x0a, 0x03, 0x10, 0x0a, 0x39, 0x42, 0x23, 0x75, 0x53 };

    private readonly byte[] _bytes2 = new byte[] { 0x84, 0x51, 0x00, 0x8c, 0x00, 0x00, 0x11, 0xaa, 0xaa, 0x0a, 0x03, 0x10, 0x0a, 0x39, 0x42, 0x24, 0x40,
        0x98, 0x64, 0x15, 0x0b, 0x01, 0x0e, 0x05, 0x00, 0x03, 0x1e, 0x00, 0x00, 0x67, 0x00, 0x00, 0x00, 0x6b, 0x42, 0x57, 0x43, 0x49, 0x54,
        0x59, 0x00, 0x00, 0x04, 0x6c, 0x42, 0x57, 0x53, 0x4d, 0x47, 0x20, 0x02, 0x00, 0x19, 0x6e, 0x06, 0x38, 0x10, 0x95, 0x6a, 0x7a, 0x7f,
        0x00, 0x82, 0x05, 0x10, 0x00, 0x00, 0x8a, 0x04, 0x00, 0x00, 0xa8, 0x0a, 0x03, 0x10, 0x0a, 0x39, 0x42, 0x23, 0x43, 0x22 };

    [TestMethod()]
    public void SplitEwsdFileBytesLogic_SplitBytes_Test()
    {
        // Arrange
        var fileBytes = new List<byte>();
        fileBytes.AddRange(_bytes1);
        fileBytes.AddRange(_bytes2);

        var fileBytesSplitLogic = new SplitEwsdFileBytesLogic();

        // Act
        var fileBytesArray = fileBytesSplitLogic.SplitBytes(fileBytes.ToArray());

        // Assert
        Assert.AreEqual(2, fileBytesArray.Length);

        Assert.AreEqual(_bytes1.Length, fileBytesArray[0].Length);
        Assert.AreEqual(_bytes2.Length, fileBytesArray[1].Length);

        Assert.IsTrue(Enumerable.SequenceEqual(fileBytesArray[0], _bytes1));
        Assert.IsTrue(Enumerable.SequenceEqual(fileBytesArray[1], _bytes2));
    }
}